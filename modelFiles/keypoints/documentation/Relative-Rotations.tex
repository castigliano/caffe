


% Header, overrides base

    % Make sure that the sphinx doc style knows who it inherits from.
    \def\sphinxdocclass{article}

    % Declare the document class
    \documentclass[letterpaper,10pt,english]{/usr/share/sphinx/texinputs/sphinxhowto}

    % Imports
    \usepackage[utf8]{inputenc}
    \DeclareUnicodeCharacter{00A0}{\\nobreakspace}
    \usepackage[T1]{fontenc}
    \usepackage{babel}
    \usepackage{times}
    \usepackage{import}
    \usepackage[Bjarne]{/usr/share/sphinx/texinputs/fncychap}
    \usepackage{longtable}
    \usepackage{/usr/share/sphinx/texinputs/sphinx}
    \usepackage{multirow}

    \usepackage{amsmath}
    \usepackage{amssymb}
    \usepackage{ucs}
    \usepackage{enumerate}

    % Used to make the Input/Output rules follow around the contents.
    \usepackage{needspace}

    % Pygments requirements
    \usepackage{fancyvrb}
    \usepackage{color}
    % ansi colors additions
    \definecolor{darkgreen}{rgb}{.12,.54,.11}
    \definecolor{lightgray}{gray}{.95}
    \definecolor{brown}{rgb}{0.54,0.27,0.07}
    \definecolor{purple}{rgb}{0.5,0.0,0.5}
    \definecolor{darkgray}{gray}{0.25}
    \definecolor{lightred}{rgb}{1.0,0.39,0.28}
    \definecolor{lightgreen}{rgb}{0.48,0.99,0.0}
    \definecolor{lightblue}{rgb}{0.53,0.81,0.92}
    \definecolor{lightpurple}{rgb}{0.87,0.63,0.87}
    \definecolor{lightcyan}{rgb}{0.5,1.0,0.83}

    % Needed to box output/input
    \usepackage{tikz}
        \usetikzlibrary{calc,arrows,shadows}
    \usepackage[framemethod=tikz]{mdframed}

    \usepackage{alltt}

    % Used to load and display graphics
    \usepackage{graphicx}
    \graphicspath{ {figs/} }
    \usepackage[Export]{adjustbox} % To resize

    % used so that images for notebooks which have spaces in the name can still be included
    \usepackage{grffile}


    % For formatting output while also word wrapping.
    \usepackage{listings}
    \lstset{breaklines=true}
    \lstset{basicstyle=\small\ttfamily}
    \def\smaller{\fontsize{9.5pt}{9.5pt}\selectfont}

    %Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    %Set pygments styles if needed...
    
        \definecolor{nbframe-border}{rgb}{0.867,0.867,0.867}
        \definecolor{nbframe-bg}{rgb}{0.969,0.969,0.969}
        \definecolor{nbframe-in-prompt}{rgb}{0.0,0.0,0.502}
        \definecolor{nbframe-out-prompt}{rgb}{0.545,0.0,0.0}

        \newenvironment{ColorVerbatim}
        {\begin{mdframed}[%
            roundcorner=1.0pt, %
            backgroundcolor=nbframe-bg, %
            userdefinedwidth=1\linewidth, %
            leftmargin=0.1\linewidth, %
            innerleftmargin=0pt, %
            innerrightmargin=0pt, %
            linecolor=nbframe-border, %
            linewidth=1pt, %
            usetwoside=false, %
            everyline=true, %
            innerlinewidth=3pt, %
            innerlinecolor=nbframe-bg, %
            middlelinewidth=1pt, %
            middlelinecolor=nbframe-bg, %
            outerlinewidth=0.5pt, %
            outerlinecolor=nbframe-border, %
            needspace=0pt
        ]}
        {\end{mdframed}}
        
        \newenvironment{InvisibleVerbatim}
        {\begin{mdframed}[leftmargin=0.1\linewidth,innerleftmargin=3pt,innerrightmargin=3pt, userdefinedwidth=1\linewidth, linewidth=0pt, linecolor=white, usetwoside=false]}
        {\end{mdframed}}

        \renewenvironment{Verbatim}[1][\unskip]
        {\begin{alltt}\smaller}
        {\end{alltt}}
    

    % Help prevent overflowing lines due to urls and other hard-to-break 
    % entities.  This doesn't catch everything...
    \sloppy

    % Document level variables
    \title{Relative-Rotations}
    \date{April 12, 2015}
    \release{}
    \author{Unknown Author}
    \renewcommand{\releasename}{}

    % TODO: Add option for the user to specify a logo for his/her export.
    \newcommand{\sphinxlogo}{}

    % Make the index page of the document.
    \makeindex

    % Import sphinx document type specifics.
     


% Body

    % Start of the document
    \begin{document}

        
            \maketitle
        

        


        
        Things I will try the PASCAL/Imagenet Setting: 1. Take bounding boxes
that are just rescaled to constant 256 x 256 2. Try cropping the boxes
carefully. 3. On Picking run the experiment of trying with different
layers - how well the network generalizes. Create a pose embedding. Do
visual reasoning in this domain. ie. two buses subtracted from each
other + car shifts the car in the right way.Initially I was making an error that mirror flipping was on while
predicting the relative rotations. Even with this I got some reasonable
weights while training from scratch. They are plotted below.

    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}2{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{\PYZpc{}}\PY{k}{matplotlib} \PY{n}{inline}
\PY{o}{\PYZpc{}}\PY{k}{load\PYZus{}ext} \PY{n}{autoreload}
\PY{o}{\PYZpc{}}\PY{k}{autoreload} \PY{l+m+mi}{2}
\PY{n}{codeDir}     \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{/work4/pulkitag\PYZhy{}code/pkgs/caffe\PYZhy{}v2\PYZhy{}2/modelFiles/keypoints/code/}\PY{l+s}{\PYZsq{}}
\PY{n}{expDir}      \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{/work4/pulkitag\PYZhy{}code/pkgs/caffe\PYZhy{}v2\PYZhy{}2/modelFiles/keypoints/exp/}\PY{l+s}{\PYZsq{}}
\PY{n}{snapshotDir} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{/data1/pulkitag/snapshots/keypoints/}\PY{l+s}{\PYZsq{}}
\PY{k+kn}{import} \PY{n+nn}{caffe}
\PY{k+kn}{import} \PY{n+nn}{os}
\PY{k+kn}{import} \PY{n+nn}{my\PYZus{}pycaffe} \PY{k+kn}{as} \PY{n+nn}{mp}
\PY{k+kn}{import} \PY{n+nn}{my\PYZus{}pycaffe\PYZus{}io} \PY{k+kn}{as} \PY{n+nn}{mpio}
\PY{k+kn}{import} \PY{n+nn}{matplotlib.pyplot} \PY{k+kn}{as} \PY{n+nn}{plt}
\PY{k+kn}{import} \PY{n+nn}{h5py} \PY{k+kn}{as} \PY{n+nn}{h5}
\PY{k+kn}{import} \PY{n+nn}{other\PYZus{}utils} \PY{k+kn}{as} \PY{n+nn}{ou}
\PY{k+kn}{import} \PY{n+nn}{collections} \PY{k+kn}{as} \PY{n+nn}{co}
\PY{c}{\PYZsh{}import plotly.plotly as ply}
\PY{c}{\PYZsh{}plotly.tools.set\PYZus{}credentials\PYZus{}file(username=\PYZsq{}pulkit.audacious\PYZsq{}, api\PYZus{}key=\PYZsq{}9cqniif4ai\PYZsq{}, stream\PYZus{}ids=[\PYZsq{}gx56jz4arp\PYZsq{}, \PYZsq{}8fa9r8ogoo\PYZsq{}])}
\PY{c}{\PYZsh{}Experiment and snapshot paths.}
\PY{c}{\PYZsh{}Load the module}
\PY{n}{currDir} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{getcwd}\PY{p}{(}\PY{p}{)}
\PY{n}{os}\PY{o}{.}\PY{n}{chdir}\PY{p}{(}\PY{n}{codeDir}\PY{p}{)}
\PY{k+kn}{import} \PY{n+nn}{process3d} \PY{k+kn}{as} \PY{n+nn}{p3d}
\PY{k+kn}{import} \PY{n+nn}{process\PYZus{}caltech} \PY{k+kn}{as} \PY{n+nn}{pc}
\PY{n}{os}\PY{o}{.}\PY{n}{chdir}\PY{p}{(}\PY{n}{currDir}\PY{p}{)}
\PY{n}{expStr} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{rotObjs\PYZus{}128\PYZus{}kmedoids30\PYZus{}20}\PY{l+s}{\PYZsq{}}
\PY{n}{defFile} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{expDir}\PY{p}{,} \PY{n}{expStr}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{caffenet\PYZus{}siamese.prototxt}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}13{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
    \PY{c}{\PYZsh{}This network was trained by concatenating fc\PYZhy{}6 features. Prior to concatenation the fc\PYZhy{}6 features had dropout of 0.5:}
    \PY{n}{numIterations}  \PY{o}{=} \PY{l+m+mi}{60000}
    \PY{n}{numIterations2} \PY{o}{=} \PY{l+m+mi}{90000}
    \PY{n}{imSz}          \PY{o}{=} \PY{l+m+mi}{128}
    \PY{n}{expStr}    \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{rotObjs\PYZus{}128\PYZus{}kmedoids30\PYZus{}20}\PY{l+s}{\PYZsq{}}
    \PY{n}{modelName} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{keypoints\PYZus{}siamese\PYZus{}scratch\PYZus{}iter\PYZus{}}\PY{l+s+si}{\PYZpc{}d}\PY{l+s}{.caffemodel}\PY{l+s}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{numIterations}
    \PY{n}{defFile}   \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{expDir}\PY{p}{,} \PY{n}{expStr}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{keynet\PYZus{}siamese\PYZus{}deploy.prototxt}\PY{l+s}{\PYZsq{}}\PY{p}{)}
    \PY{n}{modelFile} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{snapshotDir}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{exprotObjs\PYZus{}lblkmedoids30\PYZus{}20\PYZus{}imSz}\PY{l+s+si}{\PYZpc{}d}\PY{l+s}{\PYZsq{}}\PY{o}{\PYZpc{}} \PY{n}{imSz}\PY{p}{,} \PY{n}{modelName}\PY{p}{)}
    \PY{n}{net}       \PY{o}{=} \PY{n}{mp}\PY{o}{.}\PY{n}{MyNet}\PY{p}{(}\PY{n}{defFile}\PY{p}{,} \PY{n}{modelFile}\PY{p}{)}
    \PY{c}{\PYZsh{}Network without dropouts on fc\PYZhy{}6 features. }
    \PY{n}{modelName2} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{keypoints\PYZus{}siamese\PYZus{}scratch\PYZus{}nodrop\PYZus{}fc6\PYZus{}iter\PYZus{}}\PY{l+s+si}{\PYZpc{}d}\PY{l+s}{.caffemodel}\PY{l+s}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{numIterations2}
    \PY{n}{modelFile2} \PY{o}{=}  \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{snapshotDir}\PY{p}{,}\PY{l+s}{\PYZdq{}}\PY{l+s}{exprotObjs\PYZus{}lblkmedoids30\PYZus{}20\PYZus{}imSz}\PY{l+s+si}{\PYZpc{}d}\PY{l+s}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{n}{imSz}\PY{p}{,} \PY{n}{modelName2}\PY{p}{)}
    \PY{n}{net2}       \PY{o}{=} \PY{n}{mp}\PY{o}{.}\PY{n}{MyNet}\PY{p}{(}\PY{n}{defFile}\PY{p}{,} \PY{n}{modelFile2}\PY{p}{)}
    \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
    \PY{n}{ax1} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{ax2} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
    \PY{n}{net}\PY{o}{.}\PY{n}{vis\PYZus{}weights}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{conv1}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax1}\PY{p}{,} \PY{n}{titleName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{Dropout on fc6}\PY{l+s}{\PYZsq{}}\PY{p}{)}
    \PY{n}{net2}\PY{o}{.}\PY{n}{vis\PYZus{}weights}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{conv1}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax2}\PY{p}{,} \PY{n}{titleName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{No Dropout on fc6}\PY{l+s}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax1}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{off}\PY{l+s}{\PYZsq{}}\PY{p}{)}
    \PY{n}{ax2}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{off}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-out-prompt}Out\hspace{4pt}{[}13{]}:\hspace{4pt}}\\*
                \vspace{-2.55\baselineskip}\begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}(-0.5, 79.5, 79.5, -0.5)\end{alltt}

            \end{InvisibleVerbatim}
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
    \begin{center}
    \includegraphics[max size={\textwidth}{\textheight}]{Relative-Rotations_files/Relative-Rotations_3_1.png}
    \par
    \end{center}
    
            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]

\end{Verbatim}

            
                \vspace{0.3\baselineskip}
            
        \end{ColorVerbatim}
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}17{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{c}{\PYZsh{}Define the experiment}
\PY{n}{prms} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}exp\PYZus{}prms}\PY{p}{(}\PY{n}{imSz}\PY{o}{=}\PY{l+m+mi}{128}\PY{p}{,} \PY{n}{lblType}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{uniform}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{numSamplesTrain}\PY{o}{=}\PY{l+m+mi}{40000}\PY{p}{,} \PY{n}{numSamplesVal}\PY{o}{=}\PY{l+m+mi}{1000}\PY{p}{,}
                        \PY{n}{azBin}\PY{o}{=}\PY{l+m+mi}{30}\PY{p}{,} \PY{n}{elBin}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}

\PY{c}{\PYZsh{}Get the statistics of the training data.}
\PY{c}{\PYZsh{}Training data is PASCAL 2012 + Entire Imagenet. }
\PY{n}{annCountTrain} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}class\PYZus{}statistics\PYZus{}exp}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{train}\PY{l+s}{\PYZsq{}}\PY{p}{)}  
\PY{c}{\PYZsh{}Get the statistics of the val data}
\PY{n}{annCountVal}   \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}class\PYZus{}statistics\PYZus{}exp}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{val}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}18{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{annCount} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s}{\PYZsq{}}\PY{l+s+si}{\PYZpc{}s}\PY{l+s}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{key}\PY{p}{:} \PY{p}{[}\PY{n}{val}\PY{p}{]} \PY{k}{for} \PY{n}{key}\PY{p}{,}\PY{n}{val} \PY{o+ow}{in} \PY{n}{annCountTrain}\PY{o}{.}\PY{n}{iteritems}\PY{p}{(}\PY{p}{)}\PY{p}{\PYZcb{}}
\PY{n}{annCount} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s}{\PYZsq{}}\PY{l+s+si}{\PYZpc{}s}\PY{l+s}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{key}\PY{p}{:} \PY{n}{annCount}\PY{p}{[}\PY{n}{key}\PY{p}{]} \PY{o}{+} \PY{p}{[}\PY{n}{val}\PY{p}{]} \PY{k}{for} \PY{n}{key}\PY{p}{,}\PY{n}{val} \PY{o+ow}{in} \PY{n}{annCountVal}\PY{o}{.}\PY{n}{iteritems}\PY{p}{(}\PY{p}{)}\PY{p}{\PYZcb{}}
\PY{n}{formatStr} \PY{o}{=} \PY{l+s}{\PYZdq{}}\PY{l+s}{\PYZob{}:\PYZlt{}12\PYZcb{} \PYZob{}:\PYZlt{}20\PYZcb{} \PYZob{}:\PYZlt{}20\PYZcb{}}\PY{l+s}{\PYZdq{}}
\PY{k}{print} \PY{n}{formatStr}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Class}\PY{l+s}{\PYZsq{}}\PY{p}{,}\PY{l+s}{\PYZsq{}}\PY{l+s}{Train\PYZhy{}BBox}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{Val\PYZhy{}BBox}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{k}{print} \PY{l+s}{\PYZsq{}}\PY{l+s}{\PYZhy{}}\PY{l+s}{\PYZsq{}} \PY{o}{*} \PY{l+m+mi}{100}
\PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{val} \PY{o+ow}{in} \PY{n+nb}{sorted}\PY{p}{(}\PY{n}{annCount}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n}{bbTr}\PY{p}{,} \PY{n}{bbVl} \PY{o}{=} \PY{n}{val} 
    \PY{k}{print} \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s+si}{\PYZpc{}s}\PY{l+s}{\PYZdq{}} \PY{o}{\PYZpc{}} \PY{n}{formatStr}\PY{p}{)}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{key}\PY{p}{,} \PY{n}{bbTr}\PY{p}{,} \PY{n}{bbVl}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}Class        Train-BBox           Val-BBox
----------------------------------------------------------------------
------------------------------
aeroplane    2314                 361
bicycle      1656                 340
boat         2489                 265
bottle       1696                 272
bus          1356                 283
car          6194                 594
chair        2059                 1032
diningtable  2611                 288
motorbike    1570                 339
sofa         1749                 294
train        1601                 298
tvmonitor    1570                 336
\end{alltt}

            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}54{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{c}{\PYZsh{} Get statistics of pairwise labels}
\PY{n}{lblType}    \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{diff}\PY{l+s}{\PYZsq{}}
\PY{n}{numSamples} \PY{o}{=} \PY{l+m+mi}{20000}
\PY{n}{imSz}       \PY{o}{=} \PY{l+m+mi}{128}
\PY{n}{cropType}   \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{contPad}\PY{l+s}{\PYZsq{}}
\PY{n}{prms}       \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}exp\PYZus{}prms}\PY{p}{(}\PY{n}{imSz}\PY{o}{=}\PY{n}{imSz}\PY{p}{,} \PY{n}{lblType}\PY{o}{=}\PY{n}{lblType}\PY{p}{,} \PY{n}{numSamplesTrain}\PY{o}{=}\PY{n}{numSamples}\PY{p}{,} \PY{n}{cropType}\PY{o}{=}\PY{n}{cropType}\PY{p}{)}
\PY{n}{pairLabels} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}pair\PYZus{}label\PYZus{}stats}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{setName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{train}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}58{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{count} \PY{o}{=} \PY{l+m+mi}{1}
\PY{k}{print} \PY{l+s}{\PYZdq{}}\PY{l+s}{Distribution of azimuth}\PY{l+s}{\PYZdq{}}
\PY{k}{for} \PY{p}{(}\PY{n}{key}\PY{p}{,} \PY{n}{val}\PY{p}{)} \PY{o+ow}{in} \PY{n+nb}{sorted}\PY{p}{(}\PY{n}{pairLabels}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n}{ax}      \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{,}\PY{n}{count}\PY{p}{)}
    \PY{n}{azimuth} \PY{o}{=} \PY{n}{val}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{]}
    \PY{n}{n}\PY{p}{,} \PY{n}{bins}\PY{p}{,} \PY{n}{patches} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{azimuth}\PY{p}{,} \PY{l+m+mi}{20}\PY{p}{,} \PY{n}{normed}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{histtype}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{bar}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{rwidth}\PY{o}{=}\PY{l+m+mf}{0.8}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{n}{key}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{x}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{labelsize}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{y}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{labelsize}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{)}
    \PY{n}{count} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
    
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}Distribution of azimuth
\end{alltt}

            \end{InvisibleVerbatim}
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
    \begin{center}
    \includegraphics[max size={\textwidth}{\textheight}]{Relative-Rotations_files/Relative-Rotations_8_1.png}
    \par
    \end{center}
    
            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}59{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{c}{\PYZsh{}pairLabels = p3d.get\PYZus{}pair\PYZus{}label\PYZus{}stats(prms, setName=\PYZsq{}val\PYZsq{})}
\PY{n}{count} \PY{o}{=} \PY{l+m+mi}{1}
\PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
\PY{k}{print} \PY{l+s}{\PYZdq{}}\PY{l+s}{Distribtuion of Elevations}\PY{l+s}{\PYZdq{}}
\PY{k}{for} \PY{p}{(}\PY{n}{key}\PY{p}{,} \PY{n}{val}\PY{p}{)} \PY{o+ow}{in} \PY{n+nb}{sorted}\PY{p}{(}\PY{n}{pairLabels}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n}{ax}      \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{,}\PY{n}{count}\PY{p}{)}
    \PY{n}{elevation} \PY{o}{=} \PY{n}{val}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]}
    \PY{n}{n}\PY{p}{,} \PY{n}{bins}\PY{p}{,} \PY{n}{patches} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{elevation}\PY{p}{,} \PY{l+m+mi}{20}\PY{p}{,} \PY{n}{normed}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{histtype}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{bar}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{rwidth}\PY{o}{=}\PY{l+m+mf}{0.8}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{n}{key}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{x}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{labelsize}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{y}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{labelsize}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{)}
    \PY{n}{count} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}Distribtuion of Elevations
\end{alltt}

            \end{InvisibleVerbatim}
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
    \begin{center}
    \includegraphics[max size={\textwidth}{\textheight}]{Relative-Rotations_files/Relative-Rotations_9_1.png}
    \par
    \end{center}
    
            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}24{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{c}{\PYZsh{}New training where instead of taking the Medoid of the cluster, I trained on the bins of elevations and azimuth.}
\PY{c}{\PYZsh{} These examples contain information from all boxes whose minimum size \PYZgt{} 50px in the original image. }

\PY{n}{prms}  \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}exp\PYZus{}prms}\PY{p}{(}\PY{n}{cropType}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{contPad}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{numSamplesTrain}\PY{o}{=}\PY{l+m+mi}{40000}\PY{p}{,} \PY{n}{lblType}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{uniform}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{numIter} \PY{o}{=} \PY{l+m+mi}{50000}
\PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
\PY{n}{ax1} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n}{ax2} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
\PY{n}{ax3} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
\PY{n}{ax4} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{)}

\PY{c}{\PYZsh{}\PYZsh{} Get Supervised + rotation loss example}
\PY{c}{\PYZsh{}Unforutnately this was not done programattically :/}
\PY{n}{snapDir}  \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{/data1/pulkitag/pascal3d/snapshots/}\PY{l+s}{\PYZsq{}}
\PY{n}{modelFile} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{snapDir}\PY{p}{,} \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{imSz128\PYZus{}lbl\PYZhy{}uni\PYZhy{}az30el10\PYZus{}crp\PYZhy{}contPad16\PYZus{}ns4e+04\PYZus{}mb50/pascal3d\PYZus{}scratch\PYZus{}concat\PYZhy{}fc6\PYZus{}}\PY{l+s}{\PYZdq{}}
                                   \PY{l+s}{\PYZdq{}}\PY{l+s}{iter\PYZus{}}\PY{l+s+si}{\PYZpc{}d}\PY{l+s}{.caffemodel}\PY{l+s}{\PYZdq{}}\PY{p}{)} \PY{o}{\PYZpc{}} \PY{n}{numIter}\PY{p}{)}
\PY{n}{defFile} \PY{o}{=}   \PY{p}{(}\PY{l+s}{\PYZdq{}}\PY{l+s}{/work4/pulkitag\PYZhy{}code/pkgs/caffe\PYZhy{}v2\PYZhy{}2/modelFiles/pascal3d/exp/}\PY{l+s}{\PYZdq{}}
             \PY{l+s}{\PYZdq{}}\PY{l+s}{imSz128\PYZus{}lbl\PYZhy{}uni\PYZhy{}az30el10\PYZus{}crp\PYZhy{}contPad16\PYZus{}ns4e+04\PYZus{}mb50/caffenet\PYZus{}siamese\PYZus{}fc6.prototxt}\PY{l+s}{\PYZdq{}}\PY{p}{)}
\PY{n}{netJoint}  \PY{o}{=} \PY{n}{mp}\PY{o}{.}\PY{n}{MyNet}\PY{p}{(}\PY{n}{defFile}\PY{p}{,} \PY{n}{modelFile}\PY{p}{)}
\PY{k}{print} \PY{n}{modelFile}
\PY{n}{netJoint}\PY{o}{.}\PY{n}{vis\PYZus{}weights}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{conv1}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax1}\PY{p}{,} \PY{n}{titleName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{Joint}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{ax1}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{off}\PY{l+s}{\PYZsq{}}\PY{p}{)}

\PY{c}{\PYZsh{}Get the Supervised example. }
\PY{n}{cPrms} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}caffe\PYZus{}prms}\PY{p}{(}\PY{n}{isScratch}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{isClassLbl}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{concatLayer}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{fc6}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{noRot}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{concatDrop}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{)}
\PY{n}{exp} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}experiment\PYZus{}object}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{cPrms}\PY{p}{)}
\PY{n}{exp}\PY{o}{.}\PY{n}{init\PYZus{}from\PYZus{}self}\PY{p}{(}\PY{p}{)}
\PY{n}{modelFile} \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{get\PYZus{}snapshot\PYZus{}name}\PY{p}{(}\PY{n}{numIter}\PY{o}{=}\PY{n}{numIter}\PY{p}{)}
\PY{n}{defFile}   \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{files\PYZus{}}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{netdef}\PY{l+s}{\PYZsq{}}\PY{p}{]}
\PY{n}{netSup}    \PY{o}{=} \PY{n}{mp}\PY{o}{.}\PY{n}{MyNet}\PY{p}{(}\PY{n}{defFile}\PY{p}{,} \PY{n}{modelFile}\PY{p}{)}
\PY{k}{print} \PY{n}{modelFile}
\PY{n}{netSup}\PY{o}{.}\PY{n}{vis\PYZus{}weights}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{conv1}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax2}\PY{p}{,} \PY{n}{titleName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{Supervised}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{ax2}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{off}\PY{l+s}{\PYZsq{}}\PY{p}{)}

\PY{c}{\PYZsh{}Get  Unsupervised example. }
\PY{n}{cPrms} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}caffe\PYZus{}prms}\PY{p}{(}\PY{n}{isScratch}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{isClassLbl}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{,} \PY{n}{concatLayer}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{fc6}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{noRot}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{,} \PY{n}{concatDrop}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{)}
\PY{n}{exp} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}experiment\PYZus{}object}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{cPrms}\PY{p}{)}
\PY{n}{exp}\PY{o}{.}\PY{n}{init\PYZus{}from\PYZus{}self}\PY{p}{(}\PY{p}{)}
\PY{n}{modelFile} \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{get\PYZus{}snapshot\PYZus{}name}\PY{p}{(}\PY{n}{numIter}\PY{o}{=}\PY{n}{numIter}\PY{p}{)}
\PY{n}{defFile}   \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{files\PYZus{}}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{netdef}\PY{l+s}{\PYZsq{}}\PY{p}{]}
\PY{n}{netUnsup}    \PY{o}{=} \PY{n}{mp}\PY{o}{.}\PY{n}{MyNet}\PY{p}{(}\PY{n}{defFile}\PY{p}{,} \PY{n}{modelFile}\PY{p}{)}
\PY{k}{print} \PY{n}{modelFile}
\PY{n}{netUnsup}\PY{o}{.}\PY{n}{vis\PYZus{}weights}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{conv1}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax3}\PY{p}{,} \PY{n}{titleName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{Un\PYZhy{}Supervised}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{ax3}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{off}\PY{l+s}{\PYZsq{}}\PY{p}{)}

\PY{c}{\PYZsh{}Get  Unsupervised example. }
\PY{n}{cPrms} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}caffe\PYZus{}prms}\PY{p}{(}\PY{n}{isScratch}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{isClassLbl}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{,} \PY{n}{concatLayer}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{fc6}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{noRot}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{,} \PY{n}{concatDrop}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{)}
\PY{n}{exp} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}experiment\PYZus{}object}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{cPrms}\PY{p}{)}
\PY{n}{exp}\PY{o}{.}\PY{n}{init\PYZus{}from\PYZus{}self}\PY{p}{(}\PY{p}{)}
\PY{n}{modelFile} \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{get\PYZus{}snapshot\PYZus{}name}\PY{p}{(}\PY{n}{numIter}\PY{o}{=}\PY{n}{numIter}\PY{p}{)}
\PY{n}{defFile}   \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{files\PYZus{}}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{netdef}\PY{l+s}{\PYZsq{}}\PY{p}{]}
\PY{n}{netUnsup}    \PY{o}{=} \PY{n}{mp}\PY{o}{.}\PY{n}{MyNet}\PY{p}{(}\PY{n}{defFile}\PY{p}{,} \PY{n}{modelFile}\PY{p}{)}
\PY{k}{print} \PY{n}{modelFile}
\PY{n}{netUnsup}\PY{o}{.}\PY{n}{vis\PYZus{}weights}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{conv1}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{ax}\PY{o}{=}\PY{n}{ax4}\PY{p}{,} \PY{n}{titleName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{UnSup with Drop}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{ax4}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{off}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}/data1/pulkitag/pascal3d/snapshots/imSz128\_lbl-uni-az30el10\_crp-
contPad16\_ns4e+04\_mb50/pascal3d\_scratch\_concat-
fc6\_iter\_50000.caffemodel
Ignoring line: \# Autotmatically generated solver prototxt
/data1/pulkitag/pascal3d/snapshots/pascal3d\_imSz128\_lbl-uni-
az30el10\_crp-contPad16\_ns4e+04\_mb50/caffenet\_scratch\_sup\_noRot\_fc6\_ite
r\_50000.caffemodel
Ignoring line: \# Autotmatically generated solver prototxt
/data1/pulkitag/pascal3d/snapshots/pascal3d\_imSz128\_lbl-uni-
az30el10\_crp-contPad16\_ns4e+04\_mb50/caffenet\_scratch\_unsup\_fc6\_iter\_50
000.caffemodel
Ignoring line: \# Autotmatically generated solver prototxt
/data1/pulkitag/pascal3d/snapshots/pascal3d\_imSz128\_lbl-uni-
az30el10\_crp-contPad16\_ns4e+04\_mb50/caffenet\_scratch\_unsup\_fc6\_drop\_it
er\_50000.caffemodel
\end{alltt}

            \end{InvisibleVerbatim}
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
    \begin{center}
    \includegraphics[max size={\textwidth}{\textheight}]{Relative-Rotations_files/Relative-Rotations_10_1.png}
    \par
    \end{center}
    
            \end{InvisibleVerbatim}
            
        
    
This is weird that the filters with k-Medoid clustering look so much
better than filters obtained with the Euler angle uniform binning. The
critical differences between the two approaches is as following:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\itemsep1pt\parskip0pt\parsep0pt
\item
  First only considers small rotations (\textless{} 30 degrees) and bins
  all the other rotation into twenty categories.
\item
  First uses 0.005 weight std to initialize the FC layers, the latter
  uses 0.01 for initialization. This was done as with 0.005 init, the
  second case I was getting all zeros as output in the top layers.
\item
  First uses pascal only, whereas second used imagenet also.
\item
  There is a difference in classes that are bein used. First uses a set
  of 15 manually chosen classes that are mostly rigid, 12 uses the 12
  Rigid objects in pascal3d. The first includes the classes of person,
  sheep, bird, cow and horse that are ignored by the second. The second
  has bottle and diningtable which is not there in the first.
\end{enumerate}Possible things to do:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\itemsep1pt\parskip0pt\parsep0pt
\item
  Compare accuracy on an auxiliary dataset - say Caltech101? Any
  suggestions?
\item
  The issue with using less data - should I use the same architecture as
  the one used by the unsupervised method - which has a lot more
  training data available? Is that fine?
\end{enumerate}

    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{c}{\PYZsh{}The visualizations for the picking data. }
\PY{c}{\PYZsh{}I figured I havent trained a joint model for azimuth and polar angle which works \PYZhy{} so this needs to be done. }
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}36{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{c}{\PYZsh{}Performance on caltech}
\PY{n}{ou} \PY{o}{=} \PY{n+nb}{reload}\PY{p}{(}\PY{n}{ou}\PY{p}{)}
\PY{n}{maxLayer}    \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{,}\PY{l+m+mi}{6}\PY{p}{]}
\PY{n}{prms} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{get\PYZus{}prms}\PY{p}{(}\PY{p}{)}
\PY{n}{accScratch}\PY{p}{,} \PY{n}{accClassScratch} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{read\PYZus{}accuracy}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{isPreTrain}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{,} \PY{n}{preTrainStr}\PY{o}{=}\PY{n+nb+bp}{None}\PY{p}{,}
                                            \PY{n}{isFineLast}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{initLr}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{)}

\PY{n}{accPre60K}\PY{p}{,} \PY{n}{accClassPre60K} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{read\PYZus{}accuracy}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{isPreTrain}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{preTrainStr}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{rotObjs\PYZus{}kmedoids30\PYZus{}20\PYZus{}iter60K}\PY{l+s}{\PYZsq{}}\PY{p}{,}
                                            \PY{n}{isFineLast}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{initLr}\PY{o}{=}\PY{l+m+mf}{0.001}\PY{p}{)}

\PY{n}{accPre120K}\PY{p}{,} \PY{n}{accClassPre120K} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{read\PYZus{}accuracy}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{isPreTrain}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{preTrainStr}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{rotObjs\PYZus{}kmedoids30\PYZus{}20\PYZus{}nodrop\PYZus{}iter120K}\PY{l+s}{\PYZsq{}}\PY{p}{,}
                                            \PY{n}{isFineLast}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{initLr}\PY{o}{=}\PY{l+m+mf}{0.001}\PY{p}{)}

\PY{n}{alexPrms} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{get\PYZus{}prms}\PY{p}{(}\PY{n}{imSz}\PY{o}{=}\PY{l+m+mi}{256}\PY{p}{)}
\PY{n}{accAlex}\PY{p}{,} \PY{n}{accClassAlex} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{read\PYZus{}accuracy}\PY{p}{(}\PY{n}{alexPrms}\PY{p}{,} \PY{n}{isPreTrain}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{preTrainStr}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{alex}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{isFineLast}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{initLr}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{)}
    
\PY{n}{tableArgs} \PY{o}{=} \PY{n}{co}\PY{o}{.}\PY{n}{OrderedDict}\PY{p}{(}\PY{p}{[}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Layers}\PY{l+s}{\PYZsq{}}\PY{p}{,}\PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Scratch}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{accClassScratch}\PY{p}{)}\PY{p}{,}
            \PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Pre60K}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{accClassPre60K}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Pre120K}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{accClassPre120K}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Alex}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{accClassAlex}\PY{p}{)}\PY{p}{]}\PY{p}{)}
\PY{k}{print} \PY{l+s}{\PYZdq{}}\PY{l+s}{Mean Accuracy of classes \PYZhy{} Finetune only the last layer.}\PY{l+s}{\PYZdq{}}
\PY{k}{print} \PY{l+s}{\PYZsq{}}\PY{l+s}{\PYZhy{}}\PY{l+s}{\PYZsq{}} \PY{o}{*} \PY{l+m+mi}{50}
\PY{n}{ou}\PY{o}{.}\PY{n}{make\PYZus{}table}\PY{p}{(}\PY{o}{*}\PY{o}{*}\PY{n}{tableArgs}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}Mean Accuracy of classes - Finetune only the last layer.
--------------------------------------------------
Layers          Scratch         Pre60K          Alex
Pre120K

----------------------------------------------------------------------
-----

1               0.395           0.447           0.529           0.429

2               0.452           0.552           0.699           0.554

3               0.443           0.538           0.745           0.545

4               0.438           0.498           0.789           0.560

5               0.252           0.507           0.860           0.531

6               0.173           0.397           0.882           0.480

\end{alltt}

            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}17{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{maxLayer}    \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{]}
\PY{n}{prms} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{get\PYZus{}prms}\PY{p}{(}\PY{p}{)}
\PY{n}{accScratch}\PY{p}{,} \PY{n}{accClassScratch} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{read\PYZus{}accuracy}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{isPreTrain}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{,} \PY{n}{preTrainStr}\PY{o}{=}\PY{n+nb+bp}{None}\PY{p}{,}
                                            \PY{n}{isFineLast}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{,} \PY{n}{initLr}\PY{o}{=}\PY{l+m+mf}{0.0001}\PY{p}{,} \PY{n}{maxLayer}\PY{o}{=}\PY{n}{maxLayer}\PY{p}{)}

\PY{n}{accPre60K}\PY{p}{,} \PY{n}{accClassPre60K} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{read\PYZus{}accuracy}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{isPreTrain}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{preTrainStr}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{rotObjs\PYZus{}kmedoids30\PYZus{}20\PYZus{}iter60K}\PY{l+s}{\PYZsq{}}\PY{p}{,}
                                            \PY{n}{isFineLast}\PY{o}{=}\PY{n+nb+bp}{False}\PY{p}{,} \PY{n}{initLr}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{n}{maxLayer}\PY{o}{=}\PY{n}{maxLayer}\PY{p}{)}

\PY{n}{tableArgs} \PY{o}{=} \PY{n}{co}\PY{o}{.}\PY{n}{OrderedDict}\PY{p}{(}\PY{p}{[}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Layers}\PY{l+s}{\PYZsq{}}\PY{p}{,}\PY{n}{maxLayer}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Scratch}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{accClassScratch}\PY{p}{)}\PY{p}{,}
            \PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{Pre60K}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{accClassPre60K}\PY{p}{)}\PY{p}{]}\PY{p}{)}
\PY{k}{print} \PY{l+s}{\PYZdq{}}\PY{l+s}{Mean Accuracy of classes \PYZhy{} Finetune ALL the layers.}\PY{l+s}{\PYZdq{}}
\PY{k}{print} \PY{l+s}{\PYZsq{}}\PY{l+s}{\PYZhy{}}\PY{l+s}{\PYZsq{}} \PY{o}{*} \PY{l+m+mi}{50}
\PY{n}{ou}\PY{o}{.}\PY{n}{make\PYZus{}table}\PY{p}{(}\PY{o}{*}\PY{o}{*}\PY{n}{tableArgs}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                
            \begin{alltt}

        --------------------------------------------------------------
-------------
    IOError                                   Traceback (most recent
call last)



        <ipython-input-17-129ccbe9890b> in <module>()
          2 prms = pc.get\_prms()
          3 accScratch, accClassScratch = pc.read\_accuracy(prms,
isPreTrain=False, preTrainStr=None,
    ----> 4
isFineLast=False, initLr=0.0001, maxLayer=maxLayer)
          5
          6 accPre60K, accClassPre60K = pc.read\_accuracy(prms,
isPreTrain=True, preTrainStr='rotObjs\_kmedoids30\_20\_iter60K',




        /work4/pulkitag-code/pkgs/caffe-v2-2/modelFiles/keypoints/docu
mentation/process\_caltech.pyc in read\_accuracy(prms, isPreTrain,
preTrainStr, isFineLast, maxLayer, initLr, initStd)




        /usr/lib/python2.7/dist-packages/h5py/\_hl/files.pyc in
\_\_init\_\_(self, name, mode, driver, libver, userblock\_size, **kwds)
        205
        206             fapl = make\_fapl(driver, libver, **kwds)
    --> 207             fid = make\_fid(name, mode, userblock\_size,
fapl)
        208
        209         Group.\_\_init\_\_(self, fid)




        /usr/lib/python2.7/dist-packages/h5py/\_hl/files.pyc in
make\_fid(name, mode, userblock\_size, fapl, fcpl)
         77
         78     if mode == 'r':
    ---> 79         fid = h5f.open(name, h5f.ACC\_RDONLY, fapl=fapl)
         80     elif mode == 'r+':
         81         fid = h5f.open(name, h5f.ACC\_RDWR, fapl=fapl)




        /usr/lib/python2.7/dist-packages/h5py/h5f.so in h5py.h5f.open
(h5py/h5f.c:1806)()




        IOError: unable to open file (File accessibilty: Unable to
open file)

\end{alltt}
        
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}imSz128\_ntr30\_run0 pre-random\_ft-all\_mxl-1\_inLr1e-04
\end{alltt}

            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}39{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{accClassScratch}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-out-prompt}Out\hspace{4pt}{[}39{]}:\hspace{4pt}}\\*
                \vspace{-2.55\baselineskip}\begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}array([ 0.49164349,  0.5151068 ], dtype=float32)\end{alltt}

            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}8{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{c}{\PYZsh{}Visualize weights after finetuning.}
\PY{n}{prms}  \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{get\PYZus{}prms}\PY{p}{(}\PY{p}{)} 
\PY{n}{preTrainStr} \PY{o}{=} \PY{l+s}{\PYZsq{}}\PY{l+s}{rotObjs\PYZus{}kmedoids30\PYZus{}20\PYZus{}nodrop\PYZus{}iter120K}\PY{l+s}{\PYZsq{}}
\PY{n}{isFineLast}  \PY{o}{=} \PY{p}{[}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n+nb+bp}{False}\PY{p}{]}
\PY{n}{initLr} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.001}\PY{p}{,} \PY{l+m+mf}{0.000001}\PY{p}{]}
\PY{n}{initStd} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.01}\PY{p}{,} \PY{l+m+mf}{0.001}\PY{p}{]}

\PY{k}{for} \PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{n}{ff}\PY{p}{)} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{isFineLast}\PY{p}{)}\PY{p}{:}
    \PY{n}{cPrms} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{get\PYZus{}caffe\PYZus{}prms}\PY{p}{(}\PY{n}{isPreTrain}\PY{o}{=}\PY{n+nb+bp}{True}\PY{p}{,} \PY{n}{maxLayer}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}
                          \PY{n}{preTrainStr}\PY{o}{=}\PY{n}{preTrainStr}\PY{p}{,} \PY{n}{isFineLast}\PY{o}{=}\PY{n}{ff}\PY{p}{,}
                           \PY{n}{initLr}\PY{o}{=}\PY{n}{initLr}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n}{initStd}\PY{o}{=}\PY{n}{initStd}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n}{testNum}\PY{o}{=}\PY{n+nb+bp}{None}\PY{p}{)}
    \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{isFineLast}\PY{p}{)}\PY{p}{,}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{exp} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{get\PYZus{}experiment\PYZus{}object}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{cPrms}\PY{p}{)}
    \PY{n}{exp}\PY{o}{.}\PY{n}{init\PYZus{}from\PYZus{}self}\PY{p}{(}\PY{p}{)}
    \PY{n}{modelFile} \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{get\PYZus{}snapshot\PYZus{}name}\PY{p}{(}\PY{n}{numIter}\PY{o}{=}\PY{l+m+mi}{5001}\PY{p}{)}
    \PY{n}{defFile}   \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{files\PYZus{}}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{netdef}\PY{l+s}{\PYZsq{}}\PY{p}{]}
    \PY{n}{netUnsup}    \PY{o}{=} \PY{n}{mp}\PY{o}{.}\PY{n}{MyNet}\PY{p}{(}\PY{n}{defFile}\PY{p}{,} \PY{n}{modelFile}\PY{p}{)}
    \PY{k}{print} \PY{n}{modelFile}
    \PY{n}{netUnsup}\PY{o}{.}\PY{n}{vis\PYZus{}weights}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{conv1}\PY{l+s}{\PYZsq{}}\PY{p}{,}\PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{,} \PY{n}{titleName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{Fine\PYZhy{}Last: }\PY{l+s+si}{\PYZpc{}d}\PY{l+s}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{ff}\PY{p}{)}
    \PY{n}{ax}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{off}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}Ignoring line: \# Autotmatically generated solver prototxt
/data1/pulkitag/caltech101/snapshots/imSz128\_ntr30\_run0/caffenet\_pre-
rotObjs\_kmedoids30\_20\_nodrop\_iter120K\_ft-last\_mxl-1\_inLr1e-
03\_iter\_5001.caffemodel
Ignoring line: \# Autotmatically generated solver prototxt
/data1/pulkitag/caltech101/snapshots/imSz128\_ntr30\_run0/caffenet\_pre-
rotObjs\_kmedoids30\_20\_nodrop\_iter120K\_ft-all\_mxl-1\_inLr1e-06\_inSd1e-
03\_iter\_5001.caffemodel
\end{alltt}

            \end{InvisibleVerbatim}
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
    \begin{center}
    \includegraphics[max size={\textwidth}{\textheight}]{Relative-Rotations_files/Relative-Rotations_17_1.png}
    \par
    \end{center}
    
            \end{InvisibleVerbatim}
            
        
    
\subsection{Current Thoughts}\label{current-thoughts}

One thing which is still unclear is what is the best way of supervision
to train the networks. Should it be regression, classification, within
classification should it be predicting uniformaly across all bins, or
limit the amount of transformation or something else? I have experiments
with:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\itemsep1pt\parskip0pt\parsep0pt
\item
  Regression - seems to be hard to train.
\item
  Classifying euler angles uniformly -- seems to produce a lot of dead
  filters.
\item
  K-Medoid clustering only on objects within 30 degrees seems to produce
  the best filters at the moment.
\item
  Now, I am going to try to predict the euler angles seperately but
  within 30 degrees only.
\end{enumerate}

    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}16{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{prms}  \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}exp\PYZus{}prms}\PY{p}{(}\PY{n}{imSz}\PY{o}{=}\PY{l+m+mi}{256}\PY{p}{,} \PY{n}{lblType}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{rotLim}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{numSamplesTrain}\PY{o}{=}\PY{l+m+mf}{1e+05}\PY{p}{,} \PY{n}{azBin}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{,} \PY{n}{elBin}\PY{o}{=}\PY{l+m+mi}{6}\PY{p}{)}
\PY{n}{names} \PY{o}{=} \PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{azimuth}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{l+s}{\PYZsq{}}\PY{l+s}{elevation}\PY{l+s}{\PYZsq{}}\PY{p}{]} 
\PY{c}{\PYZsh{}Distribution in the val set}
\PY{n}{gen}    \PY{o}{=} \PY{n}{mpio}\PY{o}{.}\PY{n}{GenericWindowReader}\PY{p}{(}\PY{n}{prms}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{paths}\PY{l+s}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{windowFile}\PY{l+s}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{val}\PY{l+s}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{lbls}   \PY{o}{=} \PY{n}{gen}\PY{o}{.}\PY{n}{get\PYZus{}all\PYZus{}labels}\PY{p}{(}\PY{p}{)}
\PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{:}
    \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{lbls}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{lbls}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{prms}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{azBinRange}\PY{l+s}{\PYZsq{}}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{l+m+mi}{2}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{n}{names}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\PY{n}{count} \PY{o}{=} \PY{n}{ou}\PY{o}{.}\PY{n}{count\PYZus{}unique}\PY{p}{(}\PY{n}{lbls}\PY{p}{,} \PY{l+m+mi}{12}\PY{p}{)}
\PY{k}{print} \PY{n}{count}\PY{o}{/}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{count}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}All lines already read
[ 0.15122222  0.04547222  0.05127778  0.06038889  0.07338889
0.12858333
  0.1125      0.07088889  0.05988889  0.05086111  0.04402778
0.02777778
  0.12372222]
\end{alltt}

            \end{InvisibleVerbatim}
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
    \begin{center}
    \includegraphics[max size={\textwidth}{\textheight}]{Relative-Rotations_files/Relative-Rotations_19_1.png}
    \par
    \end{center}
    
            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}12{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{c}{\PYZsh{}Distribution in the val set}
\PY{n}{gen}    \PY{o}{=} \PY{n}{mpio}\PY{o}{.}\PY{n}{GenericWindowReader}\PY{p}{(}\PY{n}{prms}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{paths}\PY{l+s}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{windowFile}\PY{l+s}{\PYZsq{}}\PY{p}{]}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{train}\PY{l+s}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{lbls}   \PY{o}{=} \PY{n}{gen}\PY{o}{.}\PY{n}{get\PYZus{}all\PYZus{}labels}\PY{p}{(}\PY{p}{)}
\PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{:}
    \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{lbls}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{lbls}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{n}{i}\PY{p}{]}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{prms}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{azBinRange}\PY{l+s}{\PYZsq{}}\PY{p}{]}\PY{p}{)} \PY{o}{+} \PY{l+m+mi}{2}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{n}{names}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
\begin{alltt}All lines already read
\end{alltt}

            \end{InvisibleVerbatim}
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
    \begin{center}
    \includegraphics[max size={\textwidth}{\textheight}]{Relative-Rotations_files/Relative-Rotations_20_1.png}
    \par
    \end{center}
    
            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}10{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{prms}  \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}exp\PYZus{}prms}\PY{p}{(}\PY{n}{cropType}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{contPad}\PY{l+s}{\PYZsq{}}\PY{p}{,} \PY{n}{numSamplesTrain}\PY{o}{=}\PY{l+m+mi}{100000}\PY{p}{,} \PY{n}{lblType}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{rotLim}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{numIter} \PY{o}{=} \PY{l+m+mi}{50000}
\PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
\PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
\PY{n}{ax2} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
\PY{n}{ax3} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{3}\PY{p}{)}
\PY{n}{ax4} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{)}
\PY{n}{cPrms} \PY{o}{=} \PY{n}{p3d}\PY{o}{.}\PY{n}{get\PYZus{}caffe\PYZus{}prms}\PY{p}{(}\PY{p}{)}
\PY{n}{exp} \PY{o}{=} \PY{n}{pc}\PY{o}{.}\PY{n}{get\PYZus{}experiment\PYZus{}object}\PY{p}{(}\PY{n}{prms}\PY{p}{,} \PY{n}{cPrms}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{)}
\PY{n}{exp}\PY{o}{.}\PY{n}{init\PYZus{}from\PYZus{}self}\PY{p}{(}\PY{p}{)}
\PY{n}{modelFile} \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{get\PYZus{}snapshot\PYZus{}name}\PY{p}{(}\PY{n}{numIter}\PY{o}{=}\PY{l+m+mi}{10000}\PY{p}{)}
\PY{n}{defFile}   \PY{o}{=} \PY{n}{exp}\PY{o}{.}\PY{n}{files\PYZus{}}\PY{p}{[}\PY{l+s}{\PYZsq{}}\PY{l+s}{netdef}\PY{l+s}{\PYZsq{}}\PY{p}{]}
\PY{n}{netUnsup}    \PY{o}{=} \PY{n}{mp}\PY{o}{.}\PY{n}{MyNet}\PY{p}{(}\PY{n}{defFile}\PY{p}{,} \PY{n}{modelFile}\PY{p}{)}
\PY{k}{print} \PY{n}{modelFile}
\PY{n}{netUnsup}\PY{o}{.}\PY{n}{vis\PYZus{}weights}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{conv1}\PY{l+s}{\PYZsq{}}\PY{p}{,}\PY{n}{ax}\PY{o}{=}\PY{n}{ax}\PY{p}{,} \PY{n}{titleName}\PY{o}{=}\PY{l+s}{\PYZsq{}}\PY{l+s}{Fine\PYZhy{}Last: }\PY{l+s+si}{\PYZpc{}d}\PY{l+s}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{ff}\PY{p}{)}
\PY{n}{ax}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{l+s}{\PYZsq{}}\PY{l+s}{off}\PY{l+s}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}

            
                \vspace{-0.2\baselineskip}
            
        \end{ColorVerbatim}
    

    

        % If the first block is an image, minipage the image.  Else
        % request a certain amount of space for the input text.
        \needspace{4\baselineskip}
        
        

            % Add document contents.
            
                
            \begin{alltt}

        --------------------------------------------------------------
-------------
    KeyError                                  Traceback (most recent
call last)



        <ipython-input-10-fd456c77a7c4> in <module>()
          7 ax4 = plt.subplot(2,2,4)
          8 cPrms = p3d.get\_caffe\_prms()
    ----> 9 exp = pc.get\_experiment\_object(prms, cPrms,0)
         10 exp.init\_from\_self()
         11 modelFile = exp.get\_snapshot\_name(numIter=10000)




        /work4/pulkitag-code/pkgs/caffe-v2-2/modelFiles/keypoints/docu
mentation/process\_caltech.pyc in get\_experiment\_object(prms, cPrms,
deviceId)




        KeyError: 'expDir'

\end{alltt}
        
            
                \begin{InvisibleVerbatim}
                \vspace{-0.5\baselineskip}
    \begin{center}
    \includegraphics[max size={\textwidth}{\textheight}]{Relative-Rotations_files/Relative-Rotations_21_1.png}
    \par
    \end{center}
    
            \end{InvisibleVerbatim}
            
        
    


    % Make sure that atleast 4 lines are below the HR
    \needspace{4\baselineskip}

    
        \vspace{6pt}
        \makebox[0.1\linewidth]{\smaller\hfill\tt\color{nbframe-in-prompt}In\hspace{4pt}{[}{]}:\hspace{4pt}}\\*
        \vspace{-2.65\baselineskip}
        \begin{ColorVerbatim}
            \vspace{-0.7\baselineskip}
            \begin{Verbatim}[commandchars=\\\{\}]

\end{Verbatim}

            
                \vspace{0.3\baselineskip}
            
        \end{ColorVerbatim}
    

        

        \renewcommand{\indexname}{Index}
        \printindex

    % End of document
    \end{document}


